Масштабирование делится на два типа: **горизонтальное** и **вертикальное**.

### **Вертикальное масштабирование**

При вертикальном масштабировании мы просто проводим оптимизацию или, самым примитивным способом, увеличиваем ресурсы сервера (оперативную память, процессор, SSD).

В рамках баз данных могут использоваться следующие методы оптимизации:

1. **Оптимизация запросов (индексы)**
2. **Денормализация**
    - Существует рекомендация по ведению базы данных таким образом, чтобы избежать избыточности и обеспечить согласованность данных — это называется **нормализацией**. Однако есть и обратный процесс — **денормализация**, которая используется, чтобы пожертвовать согласованностью ради увеличения производительности.
3. **Партиционирование**
    - При выполнении `SELECT`-запроса к таблице приходится сканировать её полностью. Чем больше таблица, тем дольше выполняется запрос. Также в PostgreSQL есть ограничение на объем памяти, занимаемой одной таблицей.
    - Для решения этих проблем используется **партиционирование**. Его суть заключается в создании нескольких копий одной и той же таблицы, куда данные распределяются равномерно. Чаще всего сегментирование происходит по годам или по хешу ключа.

---

### **Горизонтальное масштабирование**

Горизонтальное масштабирование осуществляется за счёт распределения нагрузки между несколькими серверами.

1. **Шардирование**
    - По сути, **шардирование** — это то же самое партиционирование, но с хранением таблиц на **разных серверах**.
2. **Репликация**
    - **Репликация** — это создание копий основного сервера базы данных.
    - Она решает две ключевые проблемы: **отказоустойчивость** и **масштабирование чтения**.
    - Запись всегда происходит в главную реплику, а затем данные копируются в дочерние реплики (**master/slave**).
    - Чтение можно осуществлять из любой реплики.
    - Если главная реплика выходит из строя, одна из дочерних становится главной (это стандартная реализация, существуют и другие варианты).